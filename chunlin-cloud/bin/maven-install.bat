@echo off

rem 清理本地仓库.
echo [INFO] Clean up locally maven repository.
set REPOSITORY_PATH=%MAVEN_HOME%
for /f "delims=" %%i in ('dir /b /s "%REPOSITORY_PATH%\*lastUpdated*" ') do (
	echo %%i
	del /s /q "%%i"
)
echo [INFO] Cleaned up.


rem 安装项目到仓库.
cd %~dp0
set PROJECT_MODEL_DEPENDENCIES=chunlin-cloud-dependencies
set PROJECT_MODEL_PARENT=chunlin-cloud-parent
set PROJECT_MODEL_COMMON=chunlin-cloud-common
set PROJECT_MODEL_CONFIG=chunlin-cloud-config
set PROJECT_MODEL_DOMAIN=chunlin-cloud-domain
set PROJECT_MODEL_PROVIDER=chunlin-cloud-provider
set PROJECT_MODEL_CONSUMER=chunlin-cloud-consumer

echo.
call :showDependencies
echo.

echo [INFO] Installing the %PROJECT_MODEL_DEPENDENCIES% to local maven repository.
rem 使用 call 命令d才会继续执行脚本，否则 mvn 命令会调用 exit 终止脚本的继续执行.
call mvn clean install -f ../%PROJECT_MODEL_DEPENDENCIES%
echo [INFO] The %PROJECT_MODEL_DEPENDENCIES% has been installed.

echo.
call :showParent
echo.

echo [INFO] Installing the %PROJECT_MODEL_PARENT% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_PARENT%
echo [INFO] The %PROJECT_MODEL_PARENT% has been installed.

echo.
call :showCommon
echo.

echo [INFO] Installing the %PROJECT_MODEL_COMMON% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_COMMON%
echo [INFO] The %PROJECT_MODEL_COMMON% has been installed.

echo.
call :showConfig
echo.

echo [INFO] Installing the %PROJECT_MODEL_CONFIG% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_CONFIG%
echo [INFO] The %PROJECT_MODEL_CONFIG% has been installed.

echo.
call :showDomain
echo.

echo [INFO] Installing the %PROJECT_MODEL_DOMAIN% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_DOMAIN%
echo [INFO] The %PROJECT_MODEL_DOMAIN% has been installed.

echo.
call :showProvider
echo.

echo [INFO] Installing the %PROJECT_MODEL_PROVIDER% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_PROVIDER%
echo [INFO] The %PROJECT_MODEL_PROVIDER% has been installed.

echo.
call :showConsumer
echo.

echo [INFO] Installing the %PROJECT_MODEL_CONSUMER% to local maven repository.
call mvn clean install -f ../%PROJECT_MODEL_CONSUMER%
echo [INFO] The %PROJECT_MODEL_CONSUMER% has been installed.

pause
exit

:showDependencies
if not exist .outDependenciesLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgX18gICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgCi4tLS0tLnwgIHwtLS4tLS4tLS4tLS0tLS58ICB8X198Li0tLS0tLl9fX19fXy4tLS0tLnwgIHwuLS0tLS0uLS0uLS0uLS18ICB8X19fX19fLi0tfCAgfC4tLS0tLS4tLS0tLS4tLS0tLS4tLS0tLS4tLXwgIHwuLS0tLS0uLS0tLS0uLS0tLS58X198Li0tLS0tLi0tLS0tLgp8ICBfX3x8ICAgICB8ICB8ICB8ICAgICB8fCAgfCAgfHwgICAgIHxfX19fX198ICBfX3x8ICB8fCAgXyAgfCAgfCAgfCAgXyAgfF9fX19fX3wgIF8gIHx8ICAtX198ICBfICB8ICAtX198ICAgICB8ICBfICB8fCAgLV9ffCAgICAgfCAgX198fCAgfHwgIC1fX3xfXyAtLXwKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8X19fX198fF9fX19ffCAgIF9ffF9fX19ffF9ffF9ffF9fX19ffHxfX19fX3xfX3xfX3xfX19ffHxfX3x8X19fX198X19fX198CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxfX3wgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA==>.logo
certutil -decode .logo .outDependenciesLogo>nul
del .logo
)
type .outDependenciesLogo
goto :eof

:showParent
if not exist .outParentLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX18gICAKLi0tLS0ufCAgfC0tLi0tLi0tLi0tLS0tLnwgIHxfX3wuLS0tLS0uX19fX19fLi0tLS0ufCAgfC4tLS0tLS4tLS4tLS4tLXwgIHxfX19fX18uLS0tLS0uLS0tLi0uLS0tLS4tLS0tLS4tLS0tLS58ICB8XyAKfCAgX198fCAgICAgfCAgfCAgfCAgICAgfHwgIHwgIHx8ICAgICB8X19fX19ffCAgX198fCAgfHwgIF8gIHwgIHwgIHwgIF8gIHxfX19fX198ICBfICB8ICBfICB8ICAgX3wgIC1fX3wgICAgIHx8ICAgX3wKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8ICAgX198X19fLl98X198IHxfX19fX3xfX3xfX3x8X19fX3wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8X198ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA=>.logo
certutil -decode .logo .outParentLogo>nul
del .logo
)
type .outParentLogo
goto :eof

:showCommon
if not exist .outCommonLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLi0tLS0ufCAgfC0tLi0tLi0tLi0tLS0tLnwgIHxfX3wuLS0tLS0uX19fX19fLi0tLS0ufCAgfC4tLS0tLS4tLS4tLS4tLXwgIHxfX19fX18uLS0tLS4tLS0tLS4tLS0tLS0tLS4tLS0tLS0tLS4tLS0tLS4tLS0tLS4KfCAgX198fCAgICAgfCAgfCAgfCAgICAgfHwgIHwgIHx8ICAgICB8X19fX19ffCAgX198fCAgfHwgIF8gIHwgIHwgIHwgIF8gIHxfX19fX198ICBfX3wgIF8gIHwgICAgICAgIHwgICAgICAgIHwgIF8gIHwgICAgIHwKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8X19fX3xfX19fX3xfX3xfX3xfX3xfX3xfX3xfX3xfX19fX3xfX3xfX3wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA=>.logo
certutil -decode .logo .outCommonLogo>nul
del .logo
)
type .outCommonLogo
goto :eof

:showConfig
if not exist .outConfigLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgICAgICAgICAgICAgX19fIF9fICAgICAgICAKLi0tLS0ufCAgfC0tLi0tLi0tLi0tLS0tLnwgIHxfX3wuLS0tLS0uX19fX19fLi0tLS0ufCAgfC4tLS0tLS4tLS4tLS4tLXwgIHxfX19fX18uLS0tLS4tLS0tLS4tLS0tLS4nICBffF9ffC4tLS0tLS4KfCAgX198fCAgICAgfCAgfCAgfCAgICAgfHwgIHwgIHx8ICAgICB8X19fX19ffCAgX198fCAgfHwgIF8gIHwgIHwgIHwgIF8gIHxfX19fX198ICBfX3wgIF8gIHwgICAgIHwgICBffCAgfHwgIF8gIHwKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8X19fX3xfX19fX3xfX3xfX3xfX3wgfF9ffHxfX18gIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxfX19fX3wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA=>.logo
certutil -decode .logo .outConfigLogo>nul
del .logo
)
type .outConfigLogo
goto :eof

:showDomain
if not exist .outDomainLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgX18gICAgICAgICAgICAgICAgICAgICAgICBfXyAgICAgICAgCi4tLS0tLnwgIHwtLS4tLS4tLS4tLS0tLS58ICB8X198Li0tLS0tLl9fX19fXy4tLS0tLnwgIHwuLS0tLS0uLS0uLS0uLS18ICB8X19fX19fLi0tfCAgfC4tLS0tLS4tLS0tLS0tLS4tLS0uLS58X198Li0tLS0tLgp8ICBfX3x8ICAgICB8ICB8ICB8ICAgICB8fCAgfCAgfHwgICAgIHxfX19fX198ICBfX3x8ICB8fCAgXyAgfCAgfCAgfCAgXyAgfF9fX19fX3wgIF8gIHx8ICBfICB8ICAgICAgICB8ICBfICB8fCAgfHwgICAgIHwKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8X19fX198fF9fX19ffF9ffF9ffF9ffF9fXy5ffHxfX3x8X198X198CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCg==>.logo
certutil -decode .logo .outDomainLogo>nul
del .logo
)
type .outDomainLogo
goto :eof

:showProvider
if not exist .outProviderLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX18gICAgIF9fICAgICAgICAgICAgIAouLS0tLS58ICB8LS0uLS0uLS0uLS0tLS0ufCAgfF9ffC4tLS0tLS5fX19fX18uLS0tLS58ICB8Li0tLS0tLi0tLi0tLi0tfCAgfF9fX19fXy4tLS0tLS4tLS0tLi0tLS0tLi0tLi0tLnxfX3wuLS18ICB8Li0tLS0tLi0tLS0uCnwgIF9ffHwgICAgIHwgIHwgIHwgICAgIHx8ICB8ICB8fCAgICAgfF9fX19fX3wgIF9ffHwgIHx8ICBfICB8ICB8ICB8ICBfICB8X19fX19ffCAgXyAgfCAgIF98ICBfICB8ICB8ICB8fCAgfHwgIF8gIHx8ICAtX198ICAgX3wKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8ICAgX198X198IHxfX19fX3xcX19fLyB8X198fF9fX19ffHxfX19fX3xfX3wgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxfX3wgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA==>.logo
certutil -decode .logo .outProviderLogo>nul
del .logo
)
type .outProviderLogo
goto :eof

:showConsumer
if not exist .outConsumerLogo (
echo ICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyBfXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgICBfXyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAouLS0tLS58ICB8LS0uLS0uLS0uLS0tLS0ufCAgfF9ffC4tLS0tLS5fX19fX18uLS0tLS58ICB8Li0tLS0tLi0tLi0tLi0tfCAgfF9fX19fXy4tLS0tLi0tLS0tLi0tLS0tLi0tLS0tLi0tLi0tLi0tLS0tLS0tLi0tLS0tLi0tLS0uCnwgIF9ffHwgICAgIHwgIHwgIHwgICAgIHx8ICB8ICB8fCAgICAgfF9fX19fX3wgIF9ffHwgIHx8ICBfICB8ICB8ICB8ICBfICB8X19fX19ffCAgX198ICBfICB8ICAgICB8X18gLS18ICB8ICB8ICAgICAgICB8ICAtX198ICAgX3wKfF9fX198fF9ffF9ffF9fX19ffF9ffF9ffHxfX3xfX3x8X198X198ICAgICAgfF9fX198fF9ffHxfX19fX3xfX19fX3xfX19fX3wgICAgICB8X19fX3xfX19fX3xfX3xfX3xfX19fX3xfX19fX3xfX3xfX3xfX3xfX19fX3xfX3wgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg>.logo
certutil -decode .logo .outConsumerLogo>nul
del .logo
)
type .outConsumerLogo
goto :eof